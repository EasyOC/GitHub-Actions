on:
  pull_request:
    types: [opened, edited, reopened]
    
jobs:
 assign-issue:
  runs-on: ubuntu-latest

  steps:
    - name: Checkout
      uses: Lombiq/GitHub-Actions/.github/actions/checkout@dev
      with:
          token: ${{ secrets.CHECKOUT_TOKEN }}

    - name: Extract Jira key and PR author from pull request
      run: |
        JIRA_KEY="${{ github.event.pull_request.body }}"
        PR_AUTHOR=${{ env.PULL_REQUEST_AUTHOR_LOGIN }}

    - name: Assign issue to PR author
      uses: Lombiq/GitHub-Actions/.github/actions/assign-issue-to-pr-author@issue/OSOE-545
      env:
        ISSUE_QUERY: "${{ env.JIRA_KEY }} in:title"
        ASSIGNEE: "${{ env.PR_AUTHOR }}"
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }